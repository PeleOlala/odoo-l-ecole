<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="hr_ua_p2_euro_landscape" model="report.paperformat">
        <field name="name">A4 Landscape</field>
        <field name="format">A4</field>
        <field name="orientation">Landscape</field>
        <field name="margin_top">40</field>
        <field name="margin_bottom">32</field>
        <field name="margin_left">7</field>
        <field name="margin_right">7</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">35</field>
        <field name="dpi">90</field>
    </record>

    <record id="action_p2_report_html"
            model="ir.actions.report">
        <field name="name">Stat report P-2</field>
        <field name="model">hr.employee</field>
        <field name="report_type">qweb-html</field>
        <field name="report_name">hr_ua_p2.report_p2</field>
        <field name="report_file">hr_ua_p2_report_p2</field>
        <field name="print_report_name">'Print stat report P-2 - %s' % (object.name).replace('/', '')</field>
        <field name="paperformat_id" ref="hr_ua_p2.hr_ua_p2_euro_landscape"/>
        <field name="binding_model_id" ref="model_hr_employee"/>
        <field name="binding_type">report</field>
    </record>

    <record id="action_p2_report_pdf"
            model="ir.actions.report">
        <field name="name">Stat report P-2 (pdf)</field>
        <field name="model">hr.employee</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">hr_ua_p2.report_p2</field>
        <field name="report_file">hr_ua_p2_report_p2</field>
        <field name="print_report_name">'Print stat report P-2 - %s' % (object.name).replace('/', '')</field>
        <field name="paperformat_id" ref="hr_ua_p2.hr_ua_p2_euro_landscape"/>
        <field name="binding_model_id" ref="model_hr_employee"/>
        <field name="binding_type">report</field>
    </record>

    <template id="report_p2">
        <t t-call="web.html_container" t-lang="uk_UA">
            <div class="container">
                <t t-foreach="docs" t-as="employee">
                    <div class="page">
                        <div class="row">
                            <!-- Report row content -->
                            <div class="col-6" align="left">
                                <span t-field="employee.company_id.name"/>
                            </div>
                            <div class="col-6" align="left">
                                <strong>Типова форма № П-2</strong>
                            </div>
                            <div class="col-6" align="left">КОД ЄДРПОУ
                                <span t-field="employee.company_id.company_registry"/>
                            </div>
                            <div class="col-6" style="font-size:12pt;"
                                 align="left">
                                <strong>ЗАТВЕРДЖЕНО</strong>
                                <br/>
                                <strong>наказом Держкомстату та Міністерства оборони України</strong>
                                <br/>
                                <strong>від 25 грудня 2009 р. N 495/656</strong>
                                <br/>
                            </div>
                            <p class="row">
                                <table class="table-bordered col-10"
                                       style="border: 1px solid black;"
                                       width="80%">
                                    <thead>
                                        <tr>
                                            <th class="col-2">Дата заповнення</th>
                                            <th class="col-2">Табельний номер</th>
                                            <th class="col-2">ндивідуальний ідентифікаційний номер</th>
                                            <th class="col-2">Стать (чоловіча, жіноча)</th>
                                            <th class="col-2">Вид роботи (основна, за сумісництвом)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="col-2">
                                                <span t-out="context_timestamp(datetime.datetime.now()).strftime('%Y-%m-%d')"/>
                                            </td>
                                            <td class="col-2">
                                                <span t-field="employee.identification_id"/>
                                            </td>
                                            <td class="col-2">
                                                <span t-field="employee.identification_id"/>
                                            </td>
                                            <td class="col-2">
                                                <span t-field="employee.gender"/>
                                            </td>
                                            <td class="col-2">
                                                <span t-field="employee.contract_id.type_labor"/>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <ul class="col-2 list-unstyled" align="right">
                                    <img t-att-src="image_data_uri(employee.avatar_1920)"
                                         style="max-height:85pt;max-width:90%" alt="Employee Image"/>
                                </ul>
                            </p>

                            <div class="col-12" align="center">
                                <p>
                                    <strong>ОСОБОВА КАРТКА ПРАЦВНИКА</strong>
                                </p>
                            </div>
                            <div class="col-12" align="left">
                                <p>
                                    <strong>І. ЗАГАЛЬНІ ВІДОМОСТІ</strong>
                                </p>
                            </div>
                            <div class="col-12" align="left">
                                1. Прізвище, Ім’я, По батькові
                                <span t-field="employee.name"/>
                            </div>
                            <p class="row">
                                <div class="col-6" align="left">
                                    2. Дата народження
                                    <span t-field="employee.birthday"/>
                                </div>
                                <div class="col-6" align="left">
                                    3. Громадянство
                                    <span t-field="employee.country_id.name"/>
                                </div>
                            </p>
                            <div class="col-12" align="left">
                                <p>
                                    4. Освіта (базова загальна середня, повна загальна середня,
                                    професійно-технічна, базова вища, неповна вища, повна вища)
                                </p>
                            </div>
                            <p class="row">
                                <table class="table-bordered col-12"
                                       style="border: 1px solid black;"
                                       width="100%">
                                    <thead>
                                        <tr>
                                            <th class="col-5">Назва освітнього закладу</th>
                                            <th class="col-5">Диплом (свідоцтво), серія, номер</th>
                                            <th class="col-2">Рік закінчення</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="employee.mapped('resume_line_ids')" t-as="h">
                                            <t t-if="h.is_education">
                                                <tr>
                                                    <td class="text-center col-5">
                                                        <span t-field="h.name"/>
                                                    </td>
                                                    <td class="text-center col-5">
                                                        <span t-field="h.diploma"/>
                                                    </td>
                                                    <td class="text-center col-2">
                                                        <span t-field="h.date_end"/>
                                                    </td>
                                                </tr>
                                            </t>
                                        </t>
                                    </tbody>
                                </table>
                                <table class="table-bordered col-12"
                                       style="border: 1px solid black;"
                                       width="100%">
                                    <thead>
                                        <tr>
                                            <th class="col-5">Спеціальність (професія) за дипломом (свідоцтвом)</th>
                                            <th class="col-5">Кваліфікація за дипломом (свідоцтвом)</th>
                                            <th class="col-2">Форма навчання (денна, вечірня, заочна)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="employee.mapped('resume_line_ids')" t-as="h">
                                            <t t-if="h.is_education">
                                                <tr>
                                                    <td class="text-center col-5">
                                                        <span t-field="h.specialty"/>
                                                    </td>
                                                    <td class="text-center col-5">
                                                        <span t-field="h.qualification"/>
                                                    </td>
                                                    <td class="text-center col-2">
                                                        <span t-field="h.forma_ed"/>
                                                    </td>
                                                </tr>
                                            </t>
                                        </t>

                                    </tbody>
                                </table>
                            </p>
                            <div class="col-12" align="left">
                                <p>
                                    5. Післядипломна професійна підготовка: навчання в аспірантурі ад’юнктурі
                                    докторантурі (необхідне відмітити х)
                                </p>
                            </div>
                            <p class="row">
                                <div class="col-6" align="left">
                                    6. Останнє місце роботи
                                </div>
                                <div class="col-6" align="left">
                                    Посада (професія)
                                </div>
                            </p>
                            <div class="col-12" align="left">
                                <p>
                                    10. Родинний стан
                                </p>
                            </div>
                            <p class="row">
                                <table class="table-bordered col-12"
                                       style="border: 1px solid black;"
                                       width="100%">
                                    <thead>
                                        <tr>
                                            <th class="col-3">Ступінь родинного зв’язку (склад сім'ї)</th>
                                            <th class="col-7">ПІБ</th>
                                            <th class="col-2">Рік народження</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="employee.mapped('family_ids')" t-as="h">
                                            <tr>
                                                <td class="text-center col-3">
                                                    <span t-field="h.relation"/>
                                                </td>
                                                <td class="text-center col-7">
                                                    <span t-field="h.name"/>
                                                </td>
                                                <td class="text-center col-2">
                                                    <span t-field="h.birthday"/>
                                                </td>
                                            </tr>
                                        </t>

                                    </tbody>
                                </table>
                            </p>
                            <div class="col-12" align="left">
                                <p>
                                    11. Місце фактичного проживання (область, місто, район, вулиця, No будинку, квартири, номер контактного телефону, поштовий індекс)
                                </p>
                            </div>
                            <p class="row">
                                <div class="col-6" align="left">
                                    12. Місце проживання за державною реєстрацією
                                </div>
                                <div class="col-6" align="left">
                                    Паспорт
                                </div>
                            </p>
                            <div class="col-12" align="left">
                                <p>
                                    <strong>ІІ. ВІДОМОСТІ ПРО ВІЙСЬКОВИЙ ОБЛІК</strong>
                                </p>
                            </div>
                            <div class="col-12" align="left">
                                <p>
                                    <strong>ІІІ. ПРОФЕСІЙНА ОСВІТА НА ВИРОБНИЦТВІ (ЗА РАХУНОК ПІДПРИЄМСТВА - РОБОТОДАВЦЯ)</strong>
                                </p>
                            </div>
                            <div class="col-12" align="left">
                                <p>
                                    <strong>IV. ПРИЗНАЧЕННЯ І ПЕРЕВЕДЕННЯ</strong>
                                </p>
                            </div>
                            <div class="col-12" align="left">
                                <p>
                                    <strong>V. ВІДПУСТКИ</strong>
                                </p>
                            </div>


                            <!--                            <div class="col-12" style="font-size:15pt; "
                                                            align="right">
                                                           <span t-field="empl.last_name"/>
                                                       </div>
                                                       <div class="col-12" style="font-size:15pt; "
                                                            align="right">
                                                           <span t-field="empl.specialiste"/>
                                                       </div>
                                                       <t t-if="len(doctor.mapped('histore_doctors_ids'))>0">
                                                           <div class="col-12" align="center">
                                                               <p>
                                                                   <strong>History personal doctor</strong>
                                                               </p>
                                                           </div>
                                                           <p class="row">
                                                               <div class="col-10 bg-primary">Patient name</div>
                                                               <div class="col-2 bg-primary">date appointment</div>
                                                           </p>
                                                           <t t-foreach="empl.mapped('histore_doctors_ids')" t-as="h">
                                                               <p class="row">
                                                                   <div class="col-10">
                                                                       <h4>
                                                                           <span t-field="h.patient_id"/>
                                                                       </h4>
                                                                   </div>
                                                                   <div class="col-2">
                                                                       <span t-field="h.date_appointment" t-options="{'widget': 'date'}"/>
                                                                   </div>
                                                               </p>
                                                           </t>
                                                       </t>
                                                       <t t-else="">
                                                           <div class="col-12" style="font-size:15pt; "
                                                                align="centre">
                                                               Il y n'a pas uncore des declaration.
                                                               <br/>
                                                           </div>
                                                       </t>
                                                       <t t-if="len(empl.mapped('patient_declaration_ids'))>0">
                                                           <div class="col-12" align="center">
                                                               <p>
                                                                   <strong>History patients</strong>
                                                               </p>
                                                           </div>
                                                           <p class="row">
                                                               <div class="col-3 bg-primary">Patient name</div>
                                                               <div class="col-3 bg-primary">Patient last name</div>
                                                               <div class="col-2 bg-primary">Birthday</div>
                                                               <div class="col-2 bg-primary">Numbre diagnostic</div>
                                                               <div class="col-2 bg-primary">Numbre visits</div>
                                                           </p>
                                                           <t t-foreach="empl.mapped('patient_declaration_ids')" t-as="p">
                                                               <t t-set="level_douleur" t-value="len(p.mapped('diagnostic_patient_ids'))"/>
                                                               <t t-set="level_douleur_class" t-if="level_douleur &lt;= 5"
                                                                  t-value="'bg-success'"/>
                                                               <t t-set="level_douleur_class"
                                                                  t-elif="level_douleur &gt; 5 and level_douleur &lt;= 10"
                                                                  t-value="'bg-warning'"/>
                                                               <t t-set="level_douleur_class" t-else="" t-value="'bg-danger'"/>
                                                               <p class="row">
                                                                   <div t-att-class="'col-3 %s' % (level_douleur_class)">
                                                                       <h4>
                                                                           <span t-field="p.name"/>
                                                                       </h4>
                                                                   </div>
                                                                   <div t-att-class="'col-3 %s' % (level_douleur_class)">
                                                                       <span t-field="p.last_name"/>
                                                                   </div>
                                                                   <div t-att-class="'col-2 %s' % (level_douleur_class)">
                                                                       <span t-field="p.birthday" t-options="{'widget': 'date'}"/>
                                                                   </div>
                                                                   <div t-att-class="'col-2 %s' % (level_douleur_class)">
                                                                       <span t-out="len(p.mapped('diagnostic_patient_ids'))"/>
                                                                   </div>
                                                                   <div t-att-class="'col-2 %s' % (level_douleur_class)">
                                                                       <span t-out="len(p.mapped('history_patient_ids'))"/>
                                                                   </div>
                                                               </p>
                                                           </t>
                                                       </t> -->
                        </div>
                    </div>
                </t>
                <div class="row">
                </div>
            </div> <!-- Report content -->
        </t>
    </template>
</odoo>